{"id":"cp-sync-ijx","title":"Fix CCB event venue import to support location data","description":"## Problem\nCCB events were importing but venues had no location/address data.\n\n## Investigation\n- CCB API has two event endpoints:\n  - `public_calendar_listing`: Returns location as simple string (venue name only)\n  - `event_profiles`: Returns location as nested object with full address details\n\n## Solution\nUpdated location normalization in both `/includes/ChMS/CCB.php` and `/includes/ChMS/cli/CCB.php` to handle both formats:\n\n1. **String format** (public_calendar_listing): Extracts venue name\n2. **Object format** (event_profiles): Extracts name + street_address, city, state, zip\n\n## Changes Made\n- Updated `normalize_ccb_event()` to detect and handle both location formats\n- Enhanced `format_event()` to create venues with all available address data\n- Updated CLI commands to display location information properly\n- Added logging for venue creation\n\n## Result\n✅ Venues now import correctly with venue names\n✅ Code ready to support full addresses when using event_profiles endpoint\n✅ Gracefully handles both minimal and complete location data\n\n## Files Modified\n- `includes/ChMS/CCB.php`\n- `includes/ChMS/cli/CCB.php`","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-30T12:06:32.625841-06:00","created_by":"tannermoushey","updated_at":"2026-01-30T12:06:32.625841-06:00"}
